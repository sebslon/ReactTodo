(this["webpackJsonptodo-react-redux"]=this["webpackJsonptodo-react-redux"]||[]).push([[0],{27:function(e,t,a){e.exports={header:"Header_header___wgTE",header__title:"Header_header__title__kwVUi",header__list:"Header_header__list__2dVUH",header__element:"Header_header__element__2jXdN",header__link:"Header_header__link__2R8ul"}},31:function(e,t,a){e.exports={"add-task":"AddTask_add-task__1Bvdr","add-task__form":"AddTask_add-task__form__28BLY","add-task__form-row":"AddTask_add-task__form-row__1Wv5f","add-task__form-field":"AddTask_add-task__form-field__MLugX","add-task__text-field":"AddTask_add-task__text-field__25b88"}},32:function(e,t,a){e.exports={"icon-button":"IconButton_icon-button__XxsSt"}},33:function(e,t,a){e.exports={task:"Task_task__2_3oJ","task__state-panel":"Task_task__state-panel__2ugdk",task__title:"Task_task__title__z3ccx",task__description:"Task_task__description__KJkHe","task__creation-date":"Task_task__creation-date__1uVdy",task__deadline:"Task_task__deadline__33Bi7"}},34:function(e,t,a){e.exports={"tasks-list":"TasksList_tasks-list__39pST"}},39:function(e,t,a){},40:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),i=(a(39),a(40),a(10)),s=a(7),d=a.n(s),l=a(27),u=a.n(l),b=a(1),_=d()(u.a),j=function(){return Object(b.jsxs)("nav",{className:_(),children:[Object(b.jsx)("h1",{className:_("title"),children:"Get your things DONE !"}),Object(b.jsxs)("ul",{className:_("list"),children:[Object(b.jsx)("li",{className:_("element"),children:Object(b.jsx)(i.b,{className:_("link"),to:"/todo",children:"Your tasks"})}),Object(b.jsx)("li",{className:_("element"),children:Object(b.jsx)(i.b,{className:_("link"),to:"/done",children:"Done"})}),Object(b.jsx)("li",{className:_("element"),children:Object(b.jsx)(i.b,{className:_("link"),to:"/addtask",children:"Add new task"})})]})]})},O=a(2),h=a(9),f=a(29),v=a(30),p="database-manager-ready",T=function(){function e(t,a){Object(f.a)(this,e),this.databaseName=t,this.CREATE_OBJECT="create",this.DELETE_OBJECT="delete",this.READ_OBJECT="read",this.READ_MODE="readonly",this.READ_WRITE_MODE="readwrite",this.UPDATE_OBJECT="update",this.IndexedDB=window.indexedDB,this.database=void 0,this.errorHandler=function(e,t){return console.warn("Error occured during operation: ".concat(t," for object/id ").concat(e))},this.initDB(a)}return Object(v.a)(e,[{key:"closeDatabase",value:function(){this.database.close()}},{key:"createObject",value:function(e,t){var a=this;this.database.transaction(e,this.READ_WRITE_MODE).objectStore(e).add(t,t.id).onerror=function(){return a.errorHandler(e,a.CREATE_OBJECT)}}},{key:"getObject",value:function(e,t,a){var n=this,r=this.database.transaction(e,this.READ_MODE).objectStore(e).get(t);r.onerror=function(){return n.errorHandler(e,n.READ_OBJECT)},r.onsuccess=function(){void 0!==r.result&&a(r.result)}}},{key:"getAllObjects",value:function(e,t){var a=this,n=this.database.transaction(e,this.READ_MODE).objectStore(e).getAll();n.onsuccess=function(){return t(n.result)},n.onerror=function(){return a.errorHandler(e,a.READ_OBJECT)}}},{key:"deleteObject",value:function(e,t){var a=this;this.database.transaction(e,this.READ_WRITE_MODE).objectStore(e).delete(t).onerror=function(){return a.errorHandler(e,a.DELETE_OBJECT)}}},{key:"editObject",value:function(e,t){var a=this;this.database.transaction(e,this.READ_WRITE_MODE).objectStore(e).put(t,t.id).onerror=function(){return a.errorHandler(a.databaseName,a.UPDATE_OBJECT)}}},{key:"dangerousDropDatabase",value:function(){var e=this;this.database.close(),this.IndexedDB.deleteDatabase(this.databaseName).onerror=function(){return e.errorHandler(e.databaseName,e.DELETE_OBJECT)}}},{key:"initDB",value:function(e){var t=this,a=this.IndexedDB.open(this.databaseName);a.onerror=function(){return console.warn("Error loading ".concat(t.databaseName," database!"))},a.onupgradeneeded=function(){return t.handleOnUpgradeNeeded(a,e)},a.onsuccess=function(){return t.handleOnSuccessOpenRequest(a)}}},{key:"handleOnSuccessOpenRequest",value:function(e){this.database=e.result,window.dispatchEvent(new CustomEvent(p))}},{key:"handleOnUpgradeNeeded",value:function(e,t){var a=this;this.database=e.result,t&&t.forEach((function(e){a.database.objectStoreNames.contains(e)||a.database.createObjectStore(e)}))}}]),e}(),D=r.a.createContext(null);D.displayName="RootStore";var m=function(e){var t=e.children;return Object(b.jsx)(D.Provider,{value:new T("task-database",["todo","done"]),children:t})};function E(){var e=Object(n.useContext)(D);if(!e)throw new Error("Database manager not found.");return e}var k,x=a(11),A=a(31),S=a.n(A);!function(e){e.ADD_TASK="ADD_TODO_TASK",e.EDIT_TASK="EDIT_TODO_TASK",e.REMOVE_TASK="REMOVE_TODO_TASK",e.IMPORT_TASKS="IMPORT_TODO_TASKS"}(k||(k={}));var g,y=function(e){return{type:k.REMOVE_TASK,payload:{id:e}}},N=d()(S.a),w=(new Date).toISOString().slice(0,10),M=function(){var e,t,a=E(),r=Object(h.b)(),c=Object(O.h)().state,o=Object(O.g)(),i=Object(n.useState)(null!==(e=null===c||void 0===c?void 0:c.title)&&void 0!==e?e:""),s=Object(x.a)(i,2),d=s[0],l=s[1],u=Object(n.useState)(null!==(t=null===c||void 0===c?void 0:c.description)&&void 0!==t?t:""),_=Object(x.a)(u,2),j=_[0],f=_[1],v=Object(n.useState)(!1),p=Object(x.a)(v,2),T=p[0],D=p[1],m=Object(n.useState)((null===c||void 0===c?void 0:c.deadline)?new Date(c.deadline).toISOString().slice(0,10):w),A=Object(x.a)(m,2),S=A[0],g=A[1],y=function(e){"title-task"===e.target.id?l(e.target.value):f(e.target.value)},M=(null===c||void 0===c?void 0:c.id)?"Edit task":"Add task";return Object(b.jsx)("div",{className:N(),children:Object(b.jsxs)("form",{className:N("form"),children:[Object(b.jsxs)("div",{className:N("form-row"),children:[Object(b.jsx)("label",{htmlFor:"title-task",children:"Task title"}),Object(b.jsx)("input",{className:N("form-field"),onChange:y,value:d,id:"title-task",type:"text"})]}),Object(b.jsxs)("div",{className:N("form-row"),children:[Object(b.jsx)("label",{htmlFor:"description-task",children:"Task description"}),Object(b.jsx)("textarea",{id:"description-task",className:N("text-field"),onChange:y,value:j})]}),Object(b.jsxs)("div",{className:N("form-row"),children:[Object(b.jsx)("label",{htmlFor:"deadline-task",children:"Deadline"}),Object(b.jsx)("input",{onClick:function(){D((function(e){return!e}))},id:"deadline-task",type:"checkbox",value:T.toString()}),T&&Object(b.jsx)("input",{onChange:function(e){e.target.value&&g(e.target.value)},type:"date",value:S,min:w})]}),Object(b.jsx)("button",{onClick:function(e){var t,n;e.preventDefault();var i,s={id:null!==(t=null===c||void 0===c?void 0:c.id)&&void 0!==t?t:Date.now(),title:d,creationDate:null!==(n=null===c||void 0===c?void 0:c.id)&&void 0!==n?n:Date.now(),description:j,deadline:T?new Date(S).getTime():void 0};(null===c||void 0===c?void 0:c.id)?(a.editObject("todo",s),r((i=s,{type:k.EDIT_TASK,payload:i}))):(a.createObject("todo",s),r(function(e){return{type:k.ADD_TASK,payload:e}}(s))),o.push({pathname:"/todo"})},type:"submit",children:M})]})})},R=a(16),C=a(32),K=a.n(C),I=d()(K.a),B=function(e){return Object(b.jsx)("button",{className:I(),onClick:e.onClick,style:{background:"url(".concat(e.icon,")")},type:"button"})},J=a(33),H=a.n(J),P=a.p+"static/media/clear-24px.53c9f4b6.svg",F=a.p+"static/media/done-24px.7a2471bd.svg",V=a.p+"static/media/create-24px.249fb4c7.svg";!function(e){e.ADD_TASK="ADD_DONE_TASK",e.REMOVE_TASK="REMOVE_DONE_TASK",e.IMPORT_TASKS="IMPORT_DONE_TASKS"}(g||(g={}));var U;function L(e,t){var a=new Date(e),n=a.getDate(),r=U[a.getMonth()],c=a.getUTCFullYear(),o=a.getUTCHours()>9?a.getUTCHours():"0".concat(a.getUTCHours()),i=a.getMinutes()>9?a.getMinutes():"0".concat(a.getMinutes());return"".concat(t," ").concat(n," ").concat(r," ").concat(c," at : ").concat(o,":").concat(i)}function W(e){var t=e-Date.now(),a=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3);return a<0||n<0?"Today is your deadline!":"Time left: ".concat(a>9?a:"0".concat(a),":").concat(n>0?n:"0".concat(n),":").concat(r>0?r:0+r)}!function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(U||(U={}));var X=d()(H.a),Y=function(e){var t=E(),a=Object(h.b)(),r=Object(O.g)(),c="done"!==Object(O.i)().id,o=Object(n.useState)(Date.now()),i=Object(x.a)(o,2),s=i[0],d=i[1];Object(n.useEffect)((function(){var e=setInterval((function(){d(Date.now())}),1e3);return function(){clearInterval(e)}}),[s]);var l=c?"Created":"Done",u=c?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(B,{icon:V,onClick:function(){var t={pathname:"/addtask",state:e};r.push(t)}}),Object(b.jsx)(B,{icon:F,onClick:function(){var n,r=Object(R.a)(Object(R.a)({},e),{},{endDate:Date.now()});a((n=r,{type:g.ADD_TASK,payload:n})),t.createObject("done",r),a(y(e.id)),t.deleteObject("todo",e.id)}})]}):null,_=c?Object(b.jsx)("p",{className:X("creation-date"),children:L(e.creationDate,l)}):Object(b.jsx)("p",{className:X("creation-date"),children:L(e.endDate,l)}),j=e.deadline?Object(b.jsx)("p",{className:X("deadline"),children:W(e.deadline)}):null;return Object(b.jsxs)("div",{className:X(),children:[Object(b.jsxs)("div",{className:X("state-panel"),children:[Object(b.jsx)("h2",{className:X("title"),children:e.title}),u,Object(b.jsx)(B,{icon:P,onClick:function(){c?(a(y(e.id)),t.deleteObject("todo",e.id)):(a(function(e){return{type:g.REMOVE_TASK,payload:{id:e}}}(e.id)),t.deleteObject("done",e.id))}})]}),Object(b.jsx)("p",{className:X("description"),children:e.description}),_,j]})},q=a(34),z=a.n(q),G=d()(z.a),Q=function(){var e=Object(O.i)().id,t=Object(h.c)((function(t){return"done"===e?t.done:t.todo}));return Object(b.jsx)("div",{className:G(),children:t.map((function(e){return Object(b.jsx)(Y,Object(R.a)({},e),e.id)}))})},Z=function(){var e=E(),t=Object(h.b)(),a=function(){e.getAllObjects("todo",(function(e){return t(function(e){return{type:k.IMPORT_TASKS,payload:e}}(e))})),e.getAllObjects("done",(function(e){return t(function(e){return{type:g.IMPORT_TASKS,payload:e}}(e))}))};return Object(n.useEffect)((function(){window.addEventListener(p,(function(){return a()})),console.log("aa")}),[e]),Object(b.jsxs)(O.d,{children:[Object(b.jsx)(O.b,{component:M,path:"/addtask"}),Object(b.jsx)(O.b,{component:Q,path:"/:id"}),Object(b.jsx)(O.b,{component:Q,path:"/"}),Object(b.jsx)(O.a,{from:"*",to:"/todo"})]})},$=a(13),ee=a(20),te=Object($.b)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.ADD_TASK:return[].concat(Object(ee.a)(e),[t.payload]);case k.REMOVE_TASK:return e.filter((function(e){return e.id!==t.payload.id}));case k.EDIT_TASK:return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case k.IMPORT_TASKS:return t.payload;default:return e}},done:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.ADD_TASK:return[].concat(Object(ee.a)(e),[t.payload]);case g.REMOVE_TASK:return e.filter((function(e){return e.id!==t.payload.id}));case g.IMPORT_TASKS:return t.payload;default:return e}}}),ae=Object($.c)(te);d.a.setSettings({modifierDelimiter:"--",throwOnError:!0});var ne=function(){return Object(b.jsx)(h.a,{store:ae,children:Object(b.jsx)(m,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(i.a,{children:[Object(b.jsx)(j,{}),Object(b.jsx)(Z,{})]})})})})},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,48)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(ne,{})}),document.getElementById("root")),re()}},[[47,1,2]]]);
//# sourceMappingURL=main.c30e016f.chunk.js.map